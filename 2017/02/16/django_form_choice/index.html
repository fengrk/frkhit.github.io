<!doctype html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="utf-8">
    <title>django表单效果实现</title>
    <link rel="stylesheet" href="/static/css/github.css">
    <link rel="stylesheet" href="/static/css/style.css">
    

</head>
<body class="box">

<nav class="nav-menu">
    <ul>
        <li><a href="/">首页</a></li>
        <li><a href="https://github.com/frkhit/frkhit.github.io">源码</a></li>
    </ul>
</nav>

<div class="container">

    <div class="content" role="main">
        
    <h1>
<a id="user-content-django表单效果实现" class="anchor" href="#django%E8%A1%A8%E5%8D%95%E6%95%88%E6%9E%9C%E5%AE%9E%E7%8E%B0" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>django表单效果实现</h1>
<h2>
<a id="user-content-下拉动态加载数据并显示" class="anchor" href="#%E4%B8%8B%E6%8B%89%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%B9%B6%E6%98%BE%E7%A4%BA" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>下拉动态加载数据并显示</h2>
<p>问题：我想实现在表单中CharFiled中choices选项，直接加载数据库的某一列数据，而不是直接在表单中设置好数值，然后赋给choices参数；我想过使用一个函数获取数据库中数据，先进行处理，然后再赋值给choices，这样我感觉比较麻烦，有没有简单一点的方法？谢谢啊！！</p>
<p>解决：</p>
<pre><code>queue = forms.ModelChoiceField(label=u'队列',queryset=Queue.objects.all())
</code></pre>
<pre><code>class ServerForm(forms.Form):
    queue = forms.ChoiceField(label=u'队列')
    def __init__(self,*args,**kwargs):
        super(ServerForm,self).__init__(*args,**kwargs)
        self.fields['queue'].choices=((x.que,x.disr) for x in Queue.objects.all())
</code></pre>


    </div>

</div><!-- end container -->
<script src="/static/js/script.js"></script>
</body>
</html>