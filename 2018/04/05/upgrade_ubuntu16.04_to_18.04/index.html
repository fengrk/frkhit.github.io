<!doctype html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="utf-8">
    <title>将Ubuntu16.04升级为Ubuntu18.04(development branch)</title>
    <link rel="stylesheet" href="/static/css/github.css">
    <link rel="stylesheet" href="/static/css/style.css">
    

</head>
<body class="box">

<nav class="nav-menu">
    <ul>
        <li><a href="/">首页</a></li>
        <li><a href="https://github.com/frkhit/frkhit.github.io">源码</a></li>
    </ul>
</nav>

<div class="container">

    <div class="content" role="main">
        
    <h1>
<a id="user-content-将ubuntu1604升级为ubuntu1804development-branch" class="anchor" href="#%E5%B0%86ubuntu1604%E5%8D%87%E7%BA%A7%E4%B8%BAubuntu1804development-branch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>将Ubuntu16.04升级为Ubuntu18.04(development branch)</h1>
<h2>
<a id="user-content-0备份ubuntu1604" class="anchor" href="#0%E5%A4%87%E4%BB%BDubuntu1604" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>0.备份Ubuntu16.04</h2>
<pre><code>sudo tar vzcpf /media/Backup/ubuntu_`date +%Y%m%d_%H`.tar.gz --exclude=/proc --exclude=/dev --exclude=/mnt --exclude=/media --exclude=/lost+found --exclude=/cdrom --exclude=/tmp --exclude=/sys --exclude=/home --exclude=/run / &gt; /media/Backup/ubuntu_`date +%Y%m%d_%H`.log 2&gt; /media/Backup/ubuntu_`date +%Y%m%d_%H`.error

</code></pre>
<h2>
<a id="user-content-1升级至ubuntu1804-development-branch" class="anchor" href="#1%E5%8D%87%E7%BA%A7%E8%87%B3ubuntu1804-development-branch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1.升级至Ubuntu18.04 (development branch)</h2>
<pre><code>sudo apt update 
sudo apt upgrade
sudo apt autoremove
sudo apt dist-upgrade

sudo apt install update-manager-core
sudo do-release-upgrade
sudo do-release-upgrade -d

sudo apt update &amp;&amp; sudo apt -y dist-upgrade
</code></pre>
<p>然后重启电脑.</p>
<h2>
<a id="user-content-2异常处理" class="anchor" href="#2%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2.异常处理</h2>
<h3>
<a id="user-content-21-shadowsocks出现evp_cipher_ctx_cleanup错误" class="anchor" href="#21-shadowsocks%E5%87%BA%E7%8E%B0evp_cipher_ctx_cleanup%E9%94%99%E8%AF%AF" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2.1 shadowsocks出现<code>EVP_CIPHER_CTX_cleanup</code>错误</h3>
<p>报错:</p>
<pre><code>AttributeError: /usr/lib/x86_64-linux-gnu/libcrypto.so.1.1: undefined symbol: EVP_CIPHER_CTX_cleanup
</code></pre>
<p>原因:
ubuntu18.04中,openssl升级到了1.1.0b版本;而openssl在1.1.0版本中，废弃了EVP_CIPHER_CTX_cleanup函数.</p>
<p>解决方法<a href="https://www.jianshu.com/p/8151bfd9a760" rel="nofollow">参考@suanite</a>:</p>
<pre><code>用vim打开文件：
vim /usr/local/lib/python3.6/dist-packages/shadowsocks/crypto/openssl.py
跳转到52行（shadowsocks2.8.2版本，其他版本搜索一下cleanup）；
将第52行libcrypto.EVP_CIPHER_CTX_cleanup.argtypes = (c_void_p,) 改为libcrypto.EVP_CIPHER_CTX_reset.argtypes = (c_void_p,)；
再搜索cleanup（全文件共2处，此处位于111行），将libcrypto.EVP_CIPHER_CTX_cleanup(self._ctx)改为libcrypto.EVP_CIPHER_CTX_reset(self._ctx)；
重新启动ss即可。
</code></pre>
<h3>
<a id="user-content-22-wifi定时重启" class="anchor" href="#22-wifi%E5%AE%9A%E6%97%B6%E9%87%8D%E5%90%AF" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2.2 wifi定时重启</h3>
<pre><code>sudo crontab -e

# 文件最后加入一行
0 */15 * * * sudo modprobe -r rtl8723be &amp;&amp; sleep 2 &amp;&amp; sudo modprobe rtl8723be

</code></pre>
<h2>
<a id="user-content-3删除多余软件" class="anchor" href="#3%E5%88%A0%E9%99%A4%E5%A4%9A%E4%BD%99%E8%BD%AF%E4%BB%B6" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>3.删除多余软件</h2>
<p>删除系统自带videos: <code>sudo apt remove totem totem-plugins</code></p>
<p>删除系统自带gedit: <code>sudo apt remove gedit*</code></p>
<p>删除系统自带libreoffice套件: <code>sudo apt remove libreoffice*</code></p>
<p>删除不使用的包: <code>sudo apt autoremove</code></p>
<h2>
<a id="user-content-4功能设置" class="anchor" href="#4%E5%8A%9F%E8%83%BD%E8%AE%BE%E7%BD%AE" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4.功能设置</h2>
<h3>
<a id="user-content-41-打字时禁用触摸板" class="anchor" href="#41-%E6%89%93%E5%AD%97%E6%97%B6%E7%A6%81%E7%94%A8%E8%A7%A6%E6%91%B8%E6%9D%BF" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4.1 打字时禁用触摸板</h3>
<p><a href="https://askubuntu.com/questions/773595/how-can-i-disable-touchpad-while-typing-on-ubuntu-16-04-syndaemon-isnt-working" rel="nofollow">参考</a>:</p>
<p><em>方案一:</em></p>
<pre><code>sudo add-apt-repository ppa:atareao/atareao
sudo apt update
sudo apt install touchpad-indicator
</code></pre>
<p>打开touchpad-indicator, 在Actions中启用Disable tochpad on typing, 禁用时间设为300ms.</p>
<ul>
<li>成功实现功能.</li>
<li>缺点: 冻结鼠标时间&gt;2s; 系统提示严重错误.</li>
</ul>
<p><strong>方案二:</strong></p>
<pre><code>synclient PalmDetect=1
</code></pre>


    </div>

</div><!-- end container -->
<script src="/static/js/script.js"></script>
</body>
</html>